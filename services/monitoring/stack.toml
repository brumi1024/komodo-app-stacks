[[stack]]
name = "monitoring"
tags = ["monitoring", "beszel", "server-stats"]

[stack.config]
server = "homelab-vps"
poll_for_updates = true
auto_update = true
destroy_before_deploy = false
git_account = "brumi1024"
repo = "brumi1024/komodo-app-stacks"
branch = "main"
reclone = false
file_paths = [
    "services/monitoring/docker-compose.yaml",
]

environment = """
# Configuration directory
CONFIG_DIR=[[CONFIG_DIR]]

# Network and domain configuration
DOMAIN=[[OP__KOMODO__COMMON__DOMAIN]]
PORT_BESZEL_HTTP=[[PORT_BESZEL_HTTP]]
PORT_BESZEL_LISTEN=[[OP__KOMODO__MONITORING__PORT_BESZEL_LISTEN]]

# Authentication
BESZEL_AGENT_KEY=[[OP__KOMODO__MONITORING__BESZEL_AGENT_KEY]]
"""